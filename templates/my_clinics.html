{% extends "base.html" %}

{% block title %}My Clinics - RankSewa{% endblock %}

{% block content %}
<div class="d-flex align-items-center justify-content-between mb-4 flex-wrap gap-2">
    <div>
        <h2 class="mb-1">My Clinics</h2>
        <p class="text-muted mb-0">Manage your clinic profiles and appointments.</p>
    </div>
    <a href="{{ url_for('clinic_register') }}" class="btn btn-primary">
        <i class="fas fa-plus-circle me-2"></i>Register New Clinic
    </a>
</div>

{% if owned_clinics or staff_clinics %}
    {% if owned_clinics %}
    <h5 class="mb-3"><i class="fas fa-building me-2" style="color: var(--brand);"></i>Clinics You Own</h5>
    <div class="row g-4 mb-4">
        {% for clinic in owned_clinics %}
        <div class="col-md-6 col-lg-4">
            <div class="card h-100 shadow-sm" style="border-radius: 12px;">
                <div class="card-body">
                    <div class="d-flex align-items-start justify-content-between mb-2">
                        <div class="d-flex align-items-center">
                            {% if clinic.logo_url %}
                            <img src="{% if clinic.logo_url.startswith('http') %}{{ clinic.logo_url }}{% else %}{{ url_for('serve_clinic_logo', filename=clinic.logo_url.replace('clinic_logos/', '')) }}{% endif %}"
                                 alt="{{ clinic.name }}" class="me-2"
                                 style="width: 40px; height: 40px; object-fit: contain; border-radius: 8px; background: #f8f9fa;">
                            {% else %}
                            <div class="me-2 d-flex align-items-center justify-content-center"
                                 style="width: 40px; height: 40px; background: var(--brand-soft); color: var(--brand); border-radius: 8px; font-weight: bold;">
                                {{ clinic.name[:1] }}
                            </div>
                            {% endif %}
                            <h5 class="mb-0">{{ clinic.name }}</h5>
                        </div>
                        {% if not clinic.is_active %}
                        <span class="badge bg-secondary">Inactive</span>
                        {% endif %}
                    </div>
                    <p class="text-muted small mb-2">
                        <i class="fas fa-map-marker-alt me-1"></i>{{ clinic.city or clinic.address or 'No location' }}
                    </p>
                    <p class="text-muted small mb-3">
                        <span class="badge bg-light text-dark">{{ clinic.clinic_type|title }}</span>
                        {% if clinic.is_verified %}
                        <span class="badge bg-success"><i class="fas fa-check-circle me-1"></i>Verified</span>
                        {% endif %}
                    </p>
                    <a href="{{ url_for('clinic_dashboard', clinic_slug=clinic.slug) }}" class="btn btn-primary btn-sm w-100">
                        <i class="fas fa-tachometer-alt me-1"></i>Dashboard
                    </a>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
    {% endif %}

    {% if staff_clinics %}
    <h5 class="mb-3"><i class="fas fa-users me-2" style="color: var(--brand);"></i>Clinics You Manage</h5>
    <div class="row g-4 mb-4">
        {% for clinic in staff_clinics %}
        <div class="col-md-6 col-lg-4">
            <div class="card h-100 shadow-sm" style="border-radius: 12px;">
                <div class="card-body">
                    <div class="d-flex align-items-center mb-2">
                        {% if clinic.logo_url %}
                        <img src="{% if clinic.logo_url.startswith('http') %}{{ clinic.logo_url }}{% else %}{{ url_for('serve_clinic_logo', filename=clinic.logo_url.replace('clinic_logos/', '')) }}{% endif %}"
                             alt="{{ clinic.name }}" class="me-2"
                             style="width: 40px; height: 40px; object-fit: contain; border-radius: 8px; background: #f8f9fa;">
                        {% else %}
                        <div class="me-2 d-flex align-items-center justify-content-center"
                             style="width: 40px; height: 40px; background: var(--brand-soft); color: var(--brand); border-radius: 8px; font-weight: bold;">
                            {{ clinic.name[:1] }}
                        </div>
                        {% endif %}
                        <h5 class="mb-0">{{ clinic.name }}</h5>
                    </div>
                    <p class="text-muted small mb-3">
                        <i class="fas fa-map-marker-alt me-1"></i>{{ clinic.city or clinic.address or 'No location' }}
                    </p>
                    <a href="{{ url_for('clinic_dashboard', clinic_slug=clinic.slug) }}" class="btn btn-outline-primary btn-sm w-100">
                        <i class="fas fa-tachometer-alt me-1"></i>Dashboard
                    </a>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
    {% endif %}

{% else %}
<div class="text-center py-5">
    <i class="fas fa-hospital fa-4x mb-3" style="color: var(--brand-soft);"></i>
    <h4>No Clinics Yet</h4>
    <p class="text-muted mb-4">Register your clinic to start managing appointments online.</p>
    <a href="{{ url_for('clinic_register') }}" class="btn btn-primary btn-lg">
        <i class="fas fa-plus-circle me-2"></i>Register Your First Clinic
    </a>
</div>
{% endif %}
{% endblock %}
